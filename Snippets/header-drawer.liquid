<header-drawer data-breakpoint="{% if section.settings.menu_type_desktop == 'drawer' %}desktop{% else %}tablet{% endif %}"
  data-header-type="{% if header_type == 'custom-header' %}custom-header{% else %}default{% endif %}"
  class="header header-main"
>
  <details id="Details-menu-drawer-container" class="menu-drawer-container" style="margin-left: -4.3rem;">
    <summary
      class="header__icon header__icon--menu header__icon--summary focus-inset"
      aria-label="{{ 'sections.header.menu' | t }}"
      style="margin-top: 4.5rem; display: flex; align-items: center; justify-content: space-between; padding: 3rem 8rem; height: 6rem; width: 100vw; z-index: 9999;"
    >
      <div style="display: flex; align-items: center; gap: 3rem;">
        <div class="custom-hamburger-icon">
          {% render 'icon-hamburger' %}
        </div>

        <a href="/collections/all" class="{% if header_type == 'custom-header' %}custom-header-link{% else %}header-link{% endif %}" 
           style="font-size: 1.6rem; font-weight: 600; text-decoration: none;">SHOP
        </a>
        <a href="/pages/our-story-updated" class="{% if header_type == 'custom-header' %}custom-header-link{% else %}header-link{% endif %}" 
           style="font-size: 1.6rem; font-weight: 600; text-decoration: none;">ABOUT
        </a>
      </div>
    
      {% assign header_type = header_type | default: 'header' %}
      <a href="/" class="mobile-header-logo" style="display: flex; align-items: center;">
        {% if header_type == 'custom-header' %}
          <img src="{{ 'logo-white.svg' | asset_url }}" class="logo-white" alt="Paw Inspired">
        {% else %}
          <img src="{{ 'logo-color.svg' | asset_url }}" class="logo-color" alt="Paw Inspired">
        {% endif %}
      </a>
    </summary>
   
    <!-- Menu Drawer -->
    <div class="menu-drawer">
      <div class="menu-drawer__top" style="display: flex; justify-content: space-between; align-items: center; padding: 2rem 0 1rem 0;">
        <a href="/" class="drawer-logo">
          <img src="{{ 'logo-color.svg' | asset_url }}" alt="Paw Inspired" style="height: 4rem; margin-left: 0;">
        </a>
        <button class="drawer-close-button" data-close-drawer aria-label="Close Menu" 
                style="background: none; border: none; font-size: 2.4rem; color: #00b4ed; padding-top: 1.5rem;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
               viewBox="0 0 24 24" fill="none" stroke="currentColor" 
               stroke-width="2" stroke-linecap="butt" stroke-linejoin="butt">
            <path d="M20 20v-7a4 4 0 0 0-4-4H4"/><path d="M9 14 4 9l5-5"/>
          </svg>
        </button>
      </div>
      <div class="menu-drawer__inner">
        <nav class="menu-drawer__navigation" role="navigation">
          <ul class="menu-drawer__menu list-unstyled">
            {% assign menu_handle = main_menu | default: 'main-menu-2-0' %}
            {% assign menu_to_render = linklists[menu_handle] %}
            {% if menu_to_render %}
              {% for link in menu_to_render.links %}
                <li class="menu-drawer__menu-item">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                    <a href="{{ link.url }}" class="menu-drawer__menu-item-link">
                      {{ link.title }}
                    </a>
                    {% if link.links != blank %}
                      <span class="submenu-toggle">
                        <svg class="icon-plus" xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
                             viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                             stroke-width="2" stroke-linecap="miter" stroke-linejoin="miter">
                          <path d="M5 12h14"/><path d="M12 5v14"/>
                        </svg>
                        <svg class="icon-minus" xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
                             viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                             stroke-width="2" stroke-linecap="miter" stroke-linejoin="miter">
                          <path d="M5 12h14"/>
                        </svg>
                      </span>
                    {% endif %}
                  </div>
                  {% if link.links != blank %}
                    <ul class="menu-drawer__submenu list-unstyled">
                      {% for childlink in link.links %}
                        <li>
                          <a href="{{ childlink.url }}" class="submenu-title submenu-heading">
                            {% case childlink.title %}
                              {% when 'Dog Essentials' %}
                                {% render 'icon-dog-essentials' %}
                              {% when 'Pads & Liners' %}
                                {% render 'icon-pads-liners' %}
                              {% when 'Diapering & Apparel' %}
                                {% render 'icon-diapering-apparel' %}
                              {% when 'Clean & Care' %}
                                {% render 'icon-clean-care' %}
                              {% when 'Browse' %}
                                {% render 'icon-browse' %}
                              {% when 'Disposable Cat Pads' %}
                                {% render 'icon-disposable-cat-pads' %}
                              {% when 'Washable Pet Pads' %}
                                {% render 'icon-pads-liners' %}
                              {% when 'Cage Liners' %}
                                {% render 'icon-pads-liners' %}
                              {% when 'Chinchilla Cuddler' %}
                                {% render 'icon-chinchilla' %}
                              {% when 'Furr-O® Burrowing Beds' %}
                                {% render 'icon-guinea-pig' %}
                              {% when 'Hammock' %}
                                {% render 'icon-ferret' %}
                              {% when 'Snuggle Bunny® Bed' %}
                                {% render 'icon-snuggle-bunny-bed' %}
                              {% when 'Dog' %}
                                {% render 'icon-dog-essentials' %}
                              {% when 'Small Pets' %}
                                {% render 'icon-chinchilla' %}
                            {% endcase %}
                            {{ childlink.title }}
                          </a>
                          {% if childlink.links != blank %}
                            <ul class="submenu-subitems">
                              {% for sublink in childlink.links %}
                                <li><a href="{{ sublink.url }}">{{ sublink.title }}</a></li>
                              {% endfor %}
                            </ul>
                          {% endif %}
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            {% endif %}
          </ul>
          <div class="drawer-social-wrapper">
            <div class="drawer-social-icons">
              {% render 'social-media-icons' %}
            </div>
          </div>
        </nav>
      </div>
      <div class="menu-drawer__overlay"></div>
    </div>
  </details>  
  <!-- icons (include search button) -->
  <div class="custom-header-icons" style="display: flex; align-items: center; gap: 2rem;">
  <button class="header__icon js-open-search" aria-label="{{ 'general.search.search' | t }}" type="button">
    {% render 'icon-search' %}
  </button>
  <a href="/account/login" class="header__icon" aria-label="Account">
    {% render 'icon-user' %}
  </a>
  <a href="/cart" class="header__icon header__icon--cart" aria-label="Cart">
    {% render 'cart-icon-bubble' %}
  </a>
</div>
{% render 'header-search', input_id: 'Search-In-Modal-1' %}
</header-drawer> 

<style>
  /* Search-icons */
  .menu-drawer-container > summary {
    position: relative; 
    z-index: 10; 
    width: 100vw;
    align-items: center;
    justify-content: space-between;
    padding: 3rem 8rem;
    background: transparent;
    display: flex;
  }

  .header-main .custom-header-icons {
    position: absolute;
    top: 5rem; 
    right: 8rem;
    display: flex;
    align-items: center;
    gap: 2rem;
    z-index: 10002; 
  }

  .menu-drawer__overlay {
    z-index: 9998;
  }

  .js-open-search {
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
  }

  .js-open-search svg {
    width: 24px;
    height: 24px;
    stroke: #00b4ed;
  }

  .header__search > summary.header__icon {
    width: 40px;
    height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .header-main[data-header-type="custom-header"] .custom-header-icons,
  .header-main[data-header-type="custom-header"] .header__search summary {
    color: #fff;      
  }

  .shopify-section-header-sticky .custom-header-icons,
  .shopify-section-header-sticky .header__search summary,
  .header-main:not([data-header-type="custom-header"]) .custom-header-icons,
  .header-main:not([data-header-type="custom-header"]) .header__search summary {
    color: #00b4ed;    
  }

  .mobile-header-logo {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    z-index: 10;
  }
  
  .logo-white,
  .logo-color {
    height: 60px;
    padding-bottom: 1rem;
    transform: translateX(24px);
  }

  .header-main[data-header-type="custom-header"] .logo-white {
    display: inline-block;
  }
  .header-main[data-header-type="custom-header"] .logo-color {
    display: none;
  }
  .header-main:not([data-header-type="custom-header"]) .logo-white {
    display: none;
  }
  .header-main:not([data-header-type="custom-header"]) .logo-color {
    display: inline-block;
  }
  .shopify-section-header-sticky .logo-white {
    display: none !important;
  }
  .shopify-section-header-sticky .logo-color {
    display: inline-block !important;
    position: relative;
    z-index: 100;
  }
  .shopify-section-header {
    background-color: transparent;
  }
  .shopify-section-header-sticky {
    background-color: white;
    z-index: 10;
  }

  .custom-header-link {
    font-size: 18px;
    font-weight: 600;
    color: #fff;
    text-decoration: none;
  }
  .header-link {
    font-size: 1.6rem;
    font-weight: 600;
    color: #00b4ed;
    text-decoration: none;
  }

  body.show-header header.header {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 999;
  }
  
  .menu-drawer {
    position: fixed;
    top: 0;
    left: 0;
    width: 320px;
    height: 100vh;
    background: #fff;
    z-index: 10000;
    overflow-y: auto;
    padding: 2rem;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
  }

  .menu-drawer__overlay {
    position: fixed;
    top: 0;
    left: 320px;
    width: calc(100vw - 320px);
    height: 100vh;
    background: rgba(0, 0, 0, 0.1);
    z-index: 9998;
  }

  summary.header__icon.header__icon--menu.header__icon--summary.focus-inset::before {
    background: transparent !important;
  }

  .menu-drawer__menu-item {
    padding: 1rem 0;
    position: relative;
  }

  .menu-drawer__menu-item-link {
    position: relative;
    font-size: 1.6rem;
    font-weight: 500;
    color: #000;
    text-decoration: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .menu-drawer__menu-item-link::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: #00B4ED;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
  }

  .menu-drawer__menu-item.open .menu-drawer__menu-item-link::after {
    transform: scaleX(1);
  }
  
  .menu-drawer__submenu {
    display: none;
    margin-top: 1rem;
    padding-left: 0;
  }

  .menu-drawer__menu-item.open .menu-drawer__submenu {
    display: block;
  }
  
  .menu-drawer__submenu li a {
    font-size: 1.6rem;
    color: #000;
    text-decoration: none;
    line-height: 2.2rem;
    display: block;
    margin-top: 1.5rem;
  }
  
  .submenu-heading {
    display: flex;
    align-items: center;
    margin-top: 1.5rem;
    font-weight: bold;
    font-size: 1rem;
    color: #000;
  }

  .menu-drawer__submenu .submenu-heading .submenu-title {
    font-weight: bold;
    font-size: 1.8rem;
    color: #000;
  }

  .submenu-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  .submenu-title svg {
    width: 20px;
    height: 20px;
    stroke: #00B4ED;
    flex-shrink: 0;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    margin-right: 0.6rem;
  }

  .submenu-subitems {
    list-style: none;
    padding-left: 5rem;
    margin-top: 0.5rem;
  }
  
  .submenu-toggle .icon-minus {
    display: none;
  }

  .open .submenu-toggle .icon-minus {
    display: inline;
  }

  .open .submenu-toggle .icon-plus {
    display: none;
  }
  
  .submenu-toggle {
    font-size: 2rem;
    color: #00b4ed;
    cursor: pointer;
    margin-left: auto;
  }

  .drawer-close-button {
    position: relative;
    z-index: 9999;
    background: none;
    border: none;
    padding: 1.5rem;
    cursor: pointer;
  }
  
  .drawer-close-button svg,
  .menu-drawer__menu-item svg {
    width: 24px;
    height: 24px;
    stroke: #00b4ed;
    stroke-width: 2;
  }

  .header__icon {
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  .drawer-social-wrapper {
    width: 100%;
    padding: 0;
    margin-top: 0;
    display: flex;
    justify-content: center;
    text-align: center;
  }
  .drawer-social-icons {
    width: 100%;
  }
  
  .drawer-social-icons .footer-icons {
    width: 100%;
    max-width: 320px; 
    margin: 0 auto;   
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    gap: 3rem;
  }

  .drawer-social-icons .footer-icons a {
    display: inline-flex;
    align-items: center;
  }

  .drawer-social-icons .footer-icons svg {
    width: 28px;
    height: 28px;
    fill: #00b4ed !important;
    stroke: none !important;
  }

  @media screen and (max-width: 768px) {
    summary.header__icon {
      margin: 3.5rem 0 0 !important;
    }
    
    summary.header__icon--menu {
      padding: 1rem 1.2rem !important;
      height: auto;
    }

    .custom-header-link,
    .header-link {
      display: none !important;
    }

    .mobile-header-logo img {
      height: 40px;
      padding-bottom: 0;
      transform: translateX(-5px); 
    }

    .mobile-header-logo {
      top: 50%;
      transform: translate(-50%, -50%);
      height: auto;
    }
    .custom-hamburger-icon svg {
      color: #fff;
      margin-top: 1rem;
    }
    .custom-header-icons svg {
      width: 24px;
      height: 24px;
      stroke-width: 1.5;
      color: #fff;
      stroke: #fff;
    }
    .header-main .custom-header-icons {
      right: 1rem;
      gap: 0 !important;
    }

    .custom-header-icons svg,
    .custom-header-icons img {
      width: 80%;
      max-width: 50%;
      height: auto;
      flex: 0 0 100% !important;
      justify-content: flex-end;
    }
    
    a[aria-label="Account"] {
      display: none !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
  const observer = new MutationObserver(() => {
    // Drawer close button
    document.querySelectorAll('[data-close-drawer]').forEach((btn) => {
      if (!btn.dataset.bound) {
        btn.dataset.bound = 'true';
        btn.addEventListener('click', () => {
          const drawer = btn.closest('details.menu-drawer-container');
          if (drawer && drawer.hasAttribute('open')) {
            drawer.removeAttribute('open');
          }
        });
      }
    });

    // Submenu toggle
    document.querySelectorAll('.submenu-toggle').forEach((toggle) => {
      if (!toggle.dataset.bound) {
        toggle.dataset.bound = 'true';
        toggle.addEventListener('click', function () {
          const parentLi = toggle.closest('li.menu-drawer__menu-item');
          const submenu = parentLi.querySelector('.menu-drawer__submenu');
          if (submenu) {
            const isOpen = submenu.classList.contains('open');
            submenu.classList.toggle('open', !isOpen);
            parentLi.classList.toggle('open', !isOpen);
          }
        });
      }
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
  setTimeout(() => observer.takeRecords(), 0);

  // Search functionality
  const btn = document.querySelector('.js-open-search');
  const modal = document.querySelector('details-modal.header__search');
  const details = modal?.querySelector('details');
  const summary = modal?.querySelector('summary');

  if (btn && modal && details && summary) {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      const isOpen = details.hasAttribute('open');
      if (!isOpen) {
        details.setAttribute('open', '');
        summary.setAttribute('aria-expanded', 'true');
        document.body.classList.add('overflow-hidden');
        const input = details.querySelector('input[type="search"]');
        if (input) input.focus();
      } else {
        details.removeAttribute('open');
        summary.setAttribute('aria-expanded', 'false');
        document.body.classList.remove('overflow-hidden');
      }
    });
  }
});
</script>